// Smart Suggestions System - ุงูุชุฑุงุญุงุช ุฐููุฉ ุจุฏูู API
// ูุงุนุฏุฉ ุจูุงูุงุช ูููุณููุงุช ุงููุธูููุฉ ูุงูุงูุชุฑุงุญุงุช

const smartSuggestions = {
    // ูุจุฐุงุช ุดุฎุตูุฉ ุญุณุจ ุงููุฌุงู
    summaries: {
        'ูููุฏุณ ุจุฑูุฌูุงุช': 'ูููุฏุณ ุจุฑูุฌูุงุช ูุชููุฒ ุจุฎุจุฑุฉ ูู ุชุทููุฑ ุชุทุจููุงุช ุงูููุจ ูุงูููุจุงูู. ูุชุฎุตุต ูู ุจูุงุก ุญููู ุชูููุฉ ูุจุชูุฑุฉ ููุงุจูุฉ ููุชูุณุน. ุดุบูู ุจุชุนูู ุงูุชูููุงุช ุงูุญุฏูุซุฉ ูุชุทุจูู ุฃูุถู ุงูููุงุฑุณุงุช ุงูุจุฑูุฌูุฉ.',
        'ูุตูู ุฌุฑุงููู': 'ูุตูู ุฌุฑุงููู ูุจุฏุน ุจุฎุจุฑุฉ ูู ุงูุชุตููู ุงูุจุตุฑู ูุงููููุฉ ุงูุชุฌุงุฑูุฉ. ูุชุฎุตุต ูู ุฅูุดุงุก ุชุตุงููู ุฌุฐุงุจุฉ ุชุญูู ุฃูุฏุงู ุงูุนููุงุก. ููู ุจุฃุญุฏุซ ุฃุฏูุงุช ุงูุชุตููู ูุงูุงุชุฌุงูุงุช ุงูุฅุจุฏุงุนูุฉ.',
        'ูุญุงุณุจ': 'ูุญุงุณุจ ูุญุชุฑู ุจุฎุจุฑุฉ ูู ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช ูุงูุชูุงุฑูุฑ ุงููุงููุฉ. ุฏููู ูููุธู ูุน ูุนุฑูุฉ ุดุงููุฉ ุจุงููุนุงููุฑ ุงููุญุงุณุจูุฉ ูุงูุฃูุธูุฉ ุงูุถุฑูุจูุฉ.',
        'ูุฏูุฑ ูุดุงุฑูุน': 'ูุฏูุฑ ูุดุงุฑูุน ุฐู ุฎุจุฑุฉ ูู ููุงุฏุฉ ุงููุฑู ูุฅุฏุงุฑุฉ ุงููุดุงุฑูุน ูู ุงูุจุฏุงูุฉ ููููุงูุฉ. ูุชุฎุตุต ูู ูููุฌูุงุช Agile ู Scrum ูุน ุณุฌู ุญุงูู ูู ุชุณููู ุงููุดุงุฑูุน ูู ุงูููุช ุงููุญุฏุฏ.',
        'ูููุฏุณ ูุฏูู': 'ูููุฏุณ ูุฏูู ุจุฎุจุฑุฉ ูู ุชุตููู ูุชูููุฐ ุงููุดุงุฑูุน ุงูุฅูุดุงุฆูุฉ. ููู ุจุฃุญุฏุซ ุงููุนุงููุฑ ุงูููุฏุณูุฉ ูุจุฑุงูุฌ ุงูุชุตููู.',
        'ุทุจูุจ': 'ุทุจูุจ ููุชุฒู ุจุชูุฏูู ุฑุนุงูุฉ ุตุญูุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ูููุฑุถู. ุฎุจุฑุฉ ูู ุงูุชุดุฎูุต ูุงูุนูุงุฌ ูุน ููุงุฑุงุช ุชูุงุตู ููุชุงุฒุฉ.',
        'ูุนูู': 'ูุนูู ุดุบูู ุจุงูุชุนููู ูุน ุฎุจุฑุฉ ูู ุชุทููุฑ ุงูููุงูุฌ ูุฃุณุงููุจ ุงูุชุฏุฑูุณ ุงูุญุฏูุซุฉ. ูุงุฏุฑ ุนูู ุชุญููุฒ ุงูุทูุงุจ ูุชุญููู ูุชุงุฆุฌ ุชุนููููุฉ ูุชููุฒุฉ.',
        'ูุณูู ุฑููู': 'ูุชุฎุตุต ูู ุงูุชุณููู ุงูุฑููู ุจุฎุจุฑุฉ ูู ุฅุฏุงุฑุฉ ุงูุญููุงุช ุงูุฅุนูุงููุฉ ูุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ. ูุงุฏุฑ ุนูู ุชุญููู ุงูุจูุงูุงุช ูุชุญููู ููู ูุณุชุฏุงู.',
        'ูุญูู ุจูุงูุงุช': 'ูุญูู ุจูุงูุงุช ุจุฎุจุฑุฉ ูู ุงุณุชุฎุฑุงุฌ ุงูุฑุคู ูู ุงูุจูุงูุงุช ุงูุถุฎูุฉ. ูุชููู ูู ุฃุฏูุงุช ุงูุชุญููู ูุงูุชุตูุฑ ุงูุจูุงูู.',
        'ูุฏูุฑ ููุงุฑุฏ ุจุดุฑูุฉ': 'ูุชุฎุตุต ูู ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุน ุฎุจุฑุฉ ูู ุงูุชูุธูู ูุงูุชุทููุฑ ุงููุธููู. ูุงุฏุฑ ุนูู ุจูุงุก ุซูุงูุฉ ุนูู ุฅูุฌุงุจูุฉ.'
    },

    // ููุงุฑุงุช ุญุณุจ ุงููุฌุงู
    skills: {
        'ูููุฏุณ ุจุฑูุฌูุงุช': ['JavaScript', 'Python', 'React', 'Node.js', 'SQL', 'Git', 'AWS', 'Docker', 'API Development', 'Problem Solving'],
        'ูุตูู ุฌุฑุงููู': ['Photoshop', 'Illustrator', 'Figma', 'InDesign', 'Typography', 'Branding', 'UI/UX', 'After Effects', 'ุชุตููู ุงููููุฉ', 'ุงูุฅุจุฏุงุน'],
        'ูุญุงุณุจ': ['Excel ุงููุชูุฏู', 'SAP', 'QuickBooks', 'ุงูุชุญููู ุงููุงูู', 'ุฅุนุฏุงุฏ ุงูููุฒุงููุงุช', 'ุงูุถุฑุงุฆุจ', 'ุงููุฑุงุฌุนุฉ', 'IFRS', 'Oracle Financials'],
        'ูุฏูุฑ ูุดุงุฑูุน': ['Agile', 'Scrum', 'MS Project', 'Jira', 'ุงูููุงุฏุฉ', 'ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ', 'ุงูุชุฎุทูุท', 'ุงูุชูุงุตู', 'ุญู ุงููุดููุงุช', 'PMP'],
        'ูููุฏุณ ูุฏูู': ['AutoCAD', 'Revit', 'SAP2000', 'ETABS', 'ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน', 'ูุฑุงุกุฉ ุงููุฎุทุทุงุช', 'ุงูุฅุดุฑุงู ุงูููุฏุณู', 'ุงูุชุตููู ุงูุฅูุดุงุฆู'],
        'ุทุจูุจ': ['ุงูุชุดุฎูุต ุงูุณุฑูุฑู', 'ุฑุนุงูุฉ ุงููุฑุถู', 'ุงูุชูุงุตู', 'ุงูุนูู ุงูุฌูุงุนู', 'ุฅุฏุงุฑุฉ ุงูููุช', 'ุงูุชุนูู ุงููุณุชูุฑ', 'ุงูุฃูุธูุฉ ุงูุทุจูุฉ'],
        'ูุนูู': ['ุงูุชุฏุฑูุณ', 'ุฅุฏุงุฑุฉ ุงููุตู', 'ุชุทููุฑ ุงูููุงูุฌ', 'ุงูุชูููู', 'ุงูุชูููููุฌูุง ุงูุชุนููููุฉ', 'ุงูุชูุงุตู', 'ุงูุตุจุฑ', 'ุงูุฅุจุฏุงุน'],
        'ูุณูู ุฑููู': ['Google Ads', 'Facebook Ads', 'SEO', 'Google Analytics', 'ุฅุฏุงุฑุฉ ุงููุญุชูู', 'Email Marketing', 'Social Media', 'Copywriting'],
        'ูุญูู ุจูุงูุงุช': ['Python', 'R', 'SQL', 'Tableau', 'Power BI', 'Excel', 'Machine Learning', 'Statistics', 'Data Visualization'],
        'ูุฏูุฑ ููุงุฑุฏ ุจุดุฑูุฉ': ['ุงูุชูุธูู', 'ุงูุชุฏุฑูุจ', 'ุฅุฏุงุฑุฉ ุงูุฃุฏุงุก', 'ูุงููู ุงูุนูู', 'HRIS', 'ุงูุชุทููุฑ ุงููุธููู', 'ุญู ุงููุฒุงุนุงุช', 'SAP HR']
    },

    // ูููุงุช ููุชุงุญูุฉ ATS ุญุณุจ ุงููุฌุงู
    atsKeywords: {
        'ูููุฏุณ ุจุฑูุฌูุงุช': ['ุชุทููุฑ', 'ุจุฑูุฌุฉ', 'ุชุตููู', 'ุงุฎุชุจุงุฑ', 'APIs', 'ูุงุนุฏุฉ ุจูุงูุงุช', 'ุฃุฏุงุก', 'ุชุญุณูู', 'ูุฑูู', 'Agile'],
        'ูุตูู ุฌุฑุงููู': ['ุชุตููู', 'ุฅุจุฏุงุน', 'ูููุฉ', 'ุจุฑุงูุฏ', 'UI', 'UX', 'ูุดุงุฑูุน', 'ุนููุงุก', 'portfolio'],
        'ูุญุงุณุจ': ['ูุงูู', 'ุชูุงุฑูุฑ', 'ููุฒุงููุฉ', 'ุชุฏููู', 'ุถุฑุงุฆุจ', 'ุชุญููู', 'ุฏูุฉ', 'ุฃูุธูุฉ'],
        'ูุฏูุฑ ูุดุงุฑูุน': ['ููุงุฏุฉ', 'ุฅุฏุงุฑุฉ', 'ุชุฎุทูุท', 'ููุฒุงููุฉ', 'ููุงุฑุฏ', 'ุฌุฏูู', 'ูุฎุงุทุฑ', 'ุชุณููู', 'ูุฑูู'],
        'default': ['ุฎุจุฑุฉ', 'ููุงุฑุงุช', 'ุฅูุฌุงุฒุงุช', 'ูุฑูู', 'ุชุทููุฑ', 'ุชุญุณูู', 'ุฅุฏุงุฑุฉ', 'ูุดุงุฑูุน', 'ูุชุงุฆุฌ', 'ููุงุฏุฉ']
    },

    // ูุตุงุฆุญ ุฐููุฉ ููู ูุณู
    tips: {
        personal: [
            '๐ธ ุฃุถู ุตูุฑุฉ ุงุญุชุฑุงููุฉ ุจุฎูููุฉ ุจูุถุงุก ุฃู ุฑูุงุฏูุฉ',
            '๐ง ุงุณุชุฎุฏู ุจุฑูุฏ ุฅููุชุฑููู ุงุญุชุฑุงูู (ุงุณูู@gmail.com)',
            '๐ฑ ุชุฃูุฏ ูู ุตุญุฉ ุฑูู ุงูุฌูุงู ูุน ุฑูุฒ ุงูุฏููุฉ',
            '๐ ุงุฐูุฑ ุงููุฏููุฉ ูุงูุฏููุฉ ููุท'
        ],
        summary: [
            'โ๏ธ ุงุฌุนู ุงููุจุฐุฉ 3-4 ุฌูู ูุตูุฑุฉ ููุคุซุฑุฉ',
            '๐ฏ ุงุฐูุฑ ุณููุงุช ุฎุจุฑุชู ูุชุฎุตุตู ุงูุฑุฆูุณู',
            '๐ก ุฑูุฒ ุนูู ูุง ูููุฒู ุนู ุบูุฑู',
            '๐ ุงุณุชุฎุฏู ูููุงุช ููุชุงุญูุฉ ูู ุงููุธููุฉ ุงููุณุชูุฏูุฉ'
        ],
        experience: [
            '๐ ุงุจุฏุฃ ูู ููุทุฉ ุจูุนู ููู (ูุฏุชุ ุทูุฑุชุ ุญุณูุช)',
            '๐ข ุงุณุชุฎุฏู ุฃุฑูุงู ูุฅุญุตุงุฆูุงุช (ุฒูุงุฏุฉ 40%ุ ูุฑูู ูู 5)',
            '๐ ุฑูุฒ ุนูู ุงูุฅูุฌุงุฒุงุช ูููุณ ุงูููุงู ููุท',
            '๐ ุฑุชุจ ุงูุฎุจุฑุงุช ูู ุงูุฃุญุฏุซ ููุฃูุฏู'
        ],
        education: [
            '๐ ุงุฐูุฑ ุงูุฏุฑุฌุฉ ุงูุนูููุฉ ูุงูุชุฎุตุต ุจูุถูุญ',
            '๐ ุฃุถู ุงููุนุฏู ุฅุฐุง ูุงู ูููุฒุงู (3.5+ ูู 4)',
            '๐ ุงุฐูุฑ ุงูุฅูุฌุงุฒุงุช ุงูุฃูุงุฏูููุฉ ุงููููุฉ'
        ],
        skills: [
            '๐ป ุฃุถู 5-10 ููุงุฑุงุช ุฐุงุช ุตูุฉ ุจุงููุธููุฉ',
            '๐ ุฑุชุจ ุงูููุงุฑุงุช ุญุณุจ ุงูุฃูููุฉ',
            '๐ฏ ุชุฌูุจ ุงูููุงุฑุงุช ุงูุนุงูุฉ ุฌุฏุงู (ูุซู: Word, Email)',
            'โ ุฃุถู ููุงุฑุงุช ุชูููุฉ ูููุงุฑุงุช ุดุฎุตูุฉ'
        ],
        languages: [
            '๐ ุงุฐูุฑ ูุณุชูู ูู ูุบุฉ ุจูุถูุญ',
            '๐ ุฃุถู ุฃู ุดูุงุฏุงุช ูุบููุฉ (IELTS, TOEFL)'
        ],
        certifications: [
            '๐ ุฃุถู ุงูุดูุงุฏุงุช ุฐุงุช ุงูุตูุฉ ุจูุฌุงูู',
            '๐ ุงุฐูุฑ ุชุงุฑูุฎ ุงูุญุตูู ูุงูุฌูุฉ ุงููุงูุญุฉ',
            '๐ ุฃุถู ุฑูุงุจุท ุงูุชุญูู ุฅู ูุฌุฏุช'
        ],
        projects: [
            '๐ ุงุฐูุฑ ุงููุดุงุฑูุน ุงูุฃูุซุฑ ุชุฃุซูุฑุงู',
            '๐๏ธ ูุถุญ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ',
            '๐ ุฃุถู ุฑูุงุจุท ูููุดุงุฑูุน ุงูุญูุฉ ุฃู GitHub'
        ]
    },

    // ATS scoring criteria
    atsScoring: {
        contact: { weight: 15, fields: ['email', 'phone', 'location'] },
        summary: { weight: 10, minLength: 50 },
        experience: { weight: 25, minItems: 1 },
        education: { weight: 15, minItems: 1 },
        skills: { weight: 15, minItems: 5 },
        languages: { weight: 10, minItems: 1 },
        extras: { weight: 10, fields: ['certifications', 'projects'] }
    }
};

// ุฏุงูุฉ ุงูุจุญุซ ุนู ุงูุชุฑุงุญุงุช
function getSuggestions(jobTitle) {
    const normalizedTitle = normalizeJobTitle(jobTitle);

    return {
        summary: smartSuggestions.summaries[normalizedTitle] || generateGenericSummary(jobTitle),
        skills: smartSuggestions.skills[normalizedTitle] || getGenericSkills(),
        keywords: smartSuggestions.atsKeywords[normalizedTitle] || smartSuggestions.atsKeywords.default
    };
}

// ุชุทุจูุน ุงุณู ุงููุธููุฉ
function normalizeJobTitle(title) {
    if (!title) return null;
    title = title.toLowerCase().trim();

    // ุงูุจุญุซ ุนู ุชุทุงุจู ุฌุฒุฆู
    const mappings = {
        'ุจุฑูุฌ': 'ูููุฏุณ ุจุฑูุฌูุงุช',
        'ูุทูุฑ': 'ูููุฏุณ ุจุฑูุฌูุงุช',
        'developer': 'ูููุฏุณ ุจุฑูุฌูุงุช',
        'software': 'ูููุฏุณ ุจุฑูุฌูุงุช',
        'ุชุตููู': 'ูุตูู ุฌุฑุงููู',
        'graphic': 'ูุตูู ุฌุฑุงููู',
        'designer': 'ูุตูู ุฌุฑุงููู',
        'ูุญุงุณุจ': 'ูุญุงุณุจ',
        'accountant': 'ูุญุงุณุจ',
        'ูุงูู': 'ูุญุงุณุจ',
        'ูุดุงุฑูุน': 'ูุฏูุฑ ูุดุงุฑูุน',
        'project': 'ูุฏูุฑ ูุดุงุฑูุน',
        'ูุฏูู': 'ูููุฏุณ ูุฏูู',
        'civil': 'ูููุฏุณ ูุฏูู',
        'ุทุจูุจ': 'ุทุจูุจ',
        'doctor': 'ุทุจูุจ',
        'ูุนูู': 'ูุนูู',
        'teacher': 'ูุนูู',
        'ูุฏุฑุณ': 'ูุนูู',
        'ุชุณููู': 'ูุณูู ุฑููู',
        'marketing': 'ูุณูู ุฑููู',
        'ุจูุงูุงุช': 'ูุญูู ุจูุงูุงุช',
        'data': 'ูุญูู ุจูุงูุงุช',
        'analyst': 'ูุญูู ุจูุงูุงุช',
        'ููุงุฑุฏ': 'ูุฏูุฑ ููุงุฑุฏ ุจุดุฑูุฉ',
        'hr': 'ูุฏูุฑ ููุงุฑุฏ ุจุดุฑูุฉ',
        'human': 'ูุฏูุฑ ููุงุฑุฏ ุจุดุฑูุฉ'
    };

    for (const [keyword, mappedTitle] of Object.entries(mappings)) {
        if (title.includes(keyword)) {
            return mappedTitle;
        }
    }

    return null;
}

// ูุจุฐุฉ ุนุงูุฉ ุฅุฐุง ูู ูุฌุฏ ุชุฎุตุต
function generateGenericSummary(jobTitle) {
    return `ูุชุฎุตุต ูู ูุฌุงู ${jobTitle || 'ุงูุนูู'} ูุน ุฎุจุฑุฉ ุนูููุฉ ูู ุชุญููู ุงูุฃูุฏุงู ูุงูุนูู ุถูู ูุฑูู. ููุชุฒู ุจุงูุชุทููุฑ ุงููุณุชูุฑ ูุชูุฏูู ุฃูุถู ุงููุชุงุฆุฌ.`;
}

// ููุงุฑุงุช ุนุงูุฉ
function getGenericSkills() {
    return ['ุฅุฏุงุฑุฉ ุงูููุช', 'ุงูุนูู ุงูุฌูุงุนู', 'ุงูุชูุงุตู', 'ุญู ุงููุดููุงุช', 'Microsoft Office', 'ุงูุชูุธูู', 'ุงูุชุนูู ุงูุณุฑูุน'];
}

// ุงูุญุตูู ุนูู ูุตูุญุฉ ุนุดูุงุฆูุฉ ููุณู
function getRandomTip(section) {
    const tips = smartSuggestions.tips[section];
    if (!tips || tips.length === 0) return null;
    return tips[Math.floor(Math.random() * tips.length)];
}

// ุงูุญุตูู ุนูู ูู ุงููุตุงุฆุญ ููุณู
function getAllTips(section) {
    return smartSuggestions.tips[section] || [];
}

// ุชุตุฏูุฑ ุงูุฏูุงู
window.smartSuggestions = {
    getSuggestions,
    getRandomTip,
    getAllTips,
    data: smartSuggestions
};
